<!DOCTYPE html>
<!--[if IE 8]>
<html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]>
<html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="zxx" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<!--<![endif]-->
<!-- Begin Head -->
<script src="https://code.jquery.com/jquery-3.0.0.min.js"></script>
<head>
    <title>体检预约管理系统-doc-体检者总览</title>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="">
    <meta name="MobileOptimized" content="320">
    <!--Start Style -->
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/fonts.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/bootstrap.min.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/font-awesome.min.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/icofont.min.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/style.css}">
    <link rel="stylesheet" id="theme-change" type="text/css" href="">
    <style>
        .buttonbecolor:hover {
            color: var(--primary);
        }
    </style>

</head>

<body>
<div class="loader">
    <div class="spinner">
        <img th:src="@{/static/picture/loader.gif}" alt="">
    </div>
</div>
<!-- Main Body -->
<div class="page-wrapper">

    <div th:replace="template.html::title"></div>
    <div th:replace="template.html::aside"></div>
    <!-- Container Start -->
    <div class="page-wrapper">
        <div class="main-content">
            <!-- Page Title Start -->
            <div class="row">
                <div class="colxl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                    <div class="page-title-wrapper">
                        <div class="page-title-box ad-title-box-use">
                            <h4 class="page-title">体检总览</h4>
                        </div>
                        <div class="ad-breadcrumb">
                            <ul>
                                <li>
                                    <div class="ad-user-btn">
                                        <form th:action="@{/api/doc/likeSearchInDid}" id="likeSearch">
                                            <input class="form-control" type="text" placeholder="订单号/商品名称/体检者"
                                                   id="text-input" name="likeSearch" th:value="${likeSearch}">
                                            <svg version="1.1" xmlns="http://www.w3.org/2000/svg"
                                                 viewBox="0 0 56.966 56.966" onclick="toLikeSearch()"
                                                 style=" cursor: pointer">
                                                <path d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23
												s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92
												c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17
												s-17-7.626-17-17S14.61,6,23.984,6z">
                                                </path>
                                            </svg>
                                        </form>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Table Start -->
            <div class="row">
                <!-- Styled Table Card-->
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                    <div class="card table-card">
                        <div class="card-header pb-0">
                            <h4>体检列表</h4>
                        </div>
                        <div class="card-body">
                            <div class="chart-holder">
                                <div class="table-responsive">
                                    <table class="table table-styled mb-0">
                                        <thead>
                                        <tr>
                                            <th>订单号</th>
                                            <th>套餐名称</th>
                                            <th>体检人姓名</th>
                                            <th>预约日期</th>
                                            <th>是否已体检</th>
                                            <th>Action</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr th:each="info:${preInfoList}">
                                            <td th:text="${info.getPrenumber()}">#JH2033</td>
                                            <td th:text="${goodsNameList.get(preInfoList.indexOf(info))}">22/06/2021
                                            </td>
                                            <td th:text="${usernameList.get(preInfoList.indexOf(info))}">$600</td>
                                            <td th:text="${preTimeList.get(preInfoList.indexOf(info))}">$600</td>
                                            <td th:text="${info.getIftijian()}==0?'否':'是'">$600</td>
                                            <td class="relative">
                                                <a class="action-btn " href="javascript:void(0); ">
                                                    <svg class="default-size " viewBox="0 0 341.333 341.333 ">
                                                        <g>
                                                            <g>
                                                                <g>
                                                                    <path d="M170.667,85.333c23.573,0,42.667-19.093,42.667-42.667C213.333,19.093,194.24,0,170.667,0S128,19.093,128,42.667 C128,66.24,147.093,85.333,170.667,85.333z "></path>
                                                                    <path d="M170.667,128C147.093,128,128,147.093,128,170.667s19.093,42.667,42.667,42.667s42.667-19.093,42.667-42.667 S194.24,128,170.667,128z "></path>
                                                                    <path d="M170.667,256C147.093,256,128,275.093,128,298.667c0,23.573,19.093,42.667,42.667,42.667s42.667-19.093,42.667-42.667 C213.333,275.093,194.24,256,170.667,256z "></path>
                                                                </g>
                                                            </g>
                                                        </g>
                                                    </svg>
                                                </a>
                                                <div class="action-option ">
                                                    <ul>
                                                        <li>
                                                            <form th:action="@{/page/doc/tijianComment}"
                                                                  th:id="UserTiJian+${info.getPid()}">
                                                                <input hidden="hidden" th:value="${info.getPid()}"
                                                                       name="pid">
                                                                <input hidden="hidden" th:value="${info.getUid()}"
                                                                       name="uid">
                                                                <a style="color: white"
                                                                   th:onclick="toUserTiJian([[${info}]])"><i
                                                                        class="far fa-edit mr-2 "></i>开始体检</a>
                                                            </form>
                                                        </li>
                                                        <li>
                                                            <form th:action="@{/api/doc/breakPre}"
                                                                  th:id="breakPre+${info.getPid()}">
                                                                <input hidden="hidden" th:value="${info.getPid()}"
                                                                       name="pid">
                                                                <input hidden="hidden" th:value="${info.getUid()}"
                                                                       name="uid">
                                                                <a style="color: white"
                                                                   th:onclick="breakPre([[${info}]])"><i
                                                                        class="far fa-trash-alt mr-2 "></i>一键违约</a>
                                                            </form>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="ad-footer-btm">
                <p>Copyright © 2021.Company name All rights reserved.<a target="_blank"
                                                                        href="https://sc.chinaz.com/moban/">网页模板</a>
                </p>
            </div>
        </div>
    </div>
</div>

<script th:inline="javascript">
    let message = [[${message}]];
    $(function showMessage() {
        if (message != null) {
            alert(message)
        }
    })
</script>

<script !src="">
    function toLikeSearch() {
        document.getElementById("likeSearch").submit()
    }

    function breakPre(info) {
        const r = confirm("确认用户是否违约，违约将影响用户，请谨慎操作！");
        const preTime = new Date("" + info.pretime)
        const now = new Date()
        let y = now.getFullYear()
        let m = now.getMonth() + 1
        let d = now.getDay()
        const now1 = new Date(y + "-" + m + "-" + d)
        if (r === true) {
            if (preTime.getTime() > now1.getTime()) {
                alert("今日不为用户的违约时间，违约失败！请谨慎操作！！");
            } else {
                document.getElementById("breakPre" + info.pid).submit()
            }
        }
    }

    function toUserTiJian(info) {
        const r = confirm("是否确认开始体检？");
        const preTime = new Date("" + info.pretime)
        const now = new Date()
        let y = now.getFullYear()
        let m = now.getMonth() + 1
        let d = now.getDay()
        const now1 = new Date(y + "-" + m + "-" + d)
        if (r === true) {
            if (preTime.getTime() === now1.getTime()) {
                document.getElementById("UserTiJian" + info.pid).submit();
            } else {
                alert("还未到体检时间！")
            }
        }
    }
</script>


<!-- Script Start -->
<script th:src="@{/static/js/jquery.min.js}"></script>
<script th:src="@{/static/js/popper.min.js}"></script>
<script th:src="@{/static/js/bootstrap.min.js}"></script>
<script th:src="@{/static/js/swiper.min.js}"></script>
<script th:src="@{/static/js/apexcharts.min.js}"></script>
<script th:src="@{/static/js/control-chart-apexcharts.js}"></script>
<!-- Page Specific -->
<script th:src="@{/static/js/nice-select.min.js}"></script>
<!-- Custom Script -->
<script th:src="@{/static/js/custom.js}"></script>
</body>

</html>