<!DOCTYPE html>
<!--[if IE 8]>
<html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]>
<html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="zxx" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<!--<![endif]-->
<!-- Begin Head -->
<script src="https://code.jquery.com/jquery-3.0.0.min.js"></script>
<head>
    <title>体检预约管理系统-admin-医生信息管理</title>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="">
    <meta name="MobileOptimized" content="320">
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <!--Start Style -->
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/fonts.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/bootstrap.min.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/font-awesome.min.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/icofont.min.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/style.css}">
    <link rel="stylesheet" id="theme-change" type="text/css" href="">

    <style>
        .bbb {
            min-width: 170px;
            padding: 0 15px;
            height: 50px;
            line-height: 52px;
            display: inline-block;
            text-align: center;
            color: white;
            background: rgb(17, 161, 253);
            text-transform: capitalize;
            font-weight: 500;
            position: relative;
            overflow: hidden;
            border: none;
            border-radius: 5px;
        }

        .bbb:hover {
            color: white;
            background: black;
        }

        .buttonbecolor:hover {
            color: var(--primary);
        }
    </style>
</head>

<body>
<div class="loader">
    <div class="spinner">
        <img th:src="@{/static/picture/loader.gif}" alt="">
    </div>
</div>
<!-- Main Body -->
<div class="page-wrapper">

    <div th:replace="template.html::title"></div>
    <div th:replace="template.html::aside"></div>
    <!-- Container Start -->
    <div class="page-wrapper">
        <div class="main-content">
            <!-- Page Title Start -->
            <div class="row">
                <div class="colxl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                    <div class="page-title-wrapper">
                        <div class="page-title-box ad-title-box-use">
                            <h4 class="page-title">医生信息</h4>
                        </div>
                        <div class="ad-breadcrumb">
                            <ul>
                                <li>
                                    <div class="ad-user-btn">
                                        <form method="get" action="/api/admin/getDocInfo" id="likeSearch">
                                            <input class="form-control" type="text" placeholder="工号/姓名"
                                                   id="text-input" name="likeSearch" th:value="${likeSearch}">
                                            <svg version="1.1" xmlns="http://www.w3.org/2000/svg"
                                                 viewBox="0 0 56.966 56.966" onclick="likeSearchSubmit()"
                                                 style="cursor: pointer">
                                                <path d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23
												s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92
												c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17
												s-17-7.626-17-17S14.61,6,23.984,6z">
                                                </path>
                                            </svg>
                                        </form>
                                    </div>
                                </li>
                                <li>
                                    <div class="add-group">
                                        <form th:action="@{/page/admin/docRegister}">
                                            <button class="bbb">添加医生</button>
                                        </form>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Table Start -->
            <div class="row">
                <!-- Styled Table Card-->
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                    <div class="card table-card">
                        <div class="card-header pb-0">
                            <h4>信息列表</h4>
                        </div>
                        <div class="card-body">
                            <div class="chart-holder">
                                <div class="table-responsive">
                                    <table class="table table-styled mb-0">
                                        <thead>
                                        <tr>
                                            <th>工号</th>
                                            <th>姓名</th>
                                            <th>年龄</th>
                                            <th>性别</th>
                                            <th>医龄</th>
                                            <th>通讯方式</th>
                                            <th>职称</th>
                                            <th>Action</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr th:each="docInfo:${DocInfoList}">
                                            <td th:text="${docInfo.getDid()}"></td>
                                            <td th:text="${docInfo.getRealname()}"></td>
                                            <td th:text="${docInfo.getAge()}"></td>
                                            <td th:text="${docInfo.getGender()}"></td>
                                            <td th:text="${docInfo.getSaveage()}"></td>
                                            <td th:text="${docInfo.getPhone()}"></td>
                                            <td th:text="${docInfo.getTitle()}"></td>
                                            <td class="relative">
                                                <a class="action-btn " href="javascript:void(0); ">
                                                    <svg class="default-size " viewBox="0 0 341.333 341.333 ">
                                                        <g>
                                                            <g>
                                                                <g>
                                                                    <path d="M170.667,85.333c23.573,0,42.667-19.093,42.667-42.667C213.333,19.093,194.24,0,170.667,0S128,19.093,128,42.667 C128,66.24,147.093,85.333,170.667,85.333z "></path>
                                                                    <path d="M170.667,128C147.093,128,128,147.093,128,170.667s19.093,42.667,42.667,42.667s42.667-19.093,42.667-42.667 S194.24,128,170.667,128z "></path>
                                                                    <path d="M170.667,256C147.093,256,128,275.093,128,298.667c0,23.573,19.093,42.667,42.667,42.667s42.667-19.093,42.667-42.667 C213.333,275.093,194.24,256,170.667,256z "></path>
                                                                </g>
                                                            </g>
                                                        </g>
                                                    </svg>
                                                </a>
                                                <div class="action-option ">
                                                    <ul>
                                                        <li>
                                                            <!--                              /page/admin/docInfoModify-->
                                                            <!--                              th:attr="onclick='giveDocInfo(\'' + ${docInfo} + '\')'-->


                                                            <form>
                                                                <input type="text" th:name="${_csrf.parameterName}"
                                                                       th:value="${_csrf.token}" hidden>
                                                                <a type="button"
                                                                   th:onclick="giveDocInfo([[${docInfo}]])"
                                                                   style="color: white"><i
                                                                        class="far fa-edit mr-2 "></i>修改</a>
                                                            </form>
                                                        </li>
                                                        <li>
                                                            <a href="#"
                                                               th:attr="onclick='delDoc(\'' + ${docInfo.getDid()} + '\')'"><i
                                                                    class="far fa-trash-alt mr-2 "></i>删除</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="ad-footer-btm">
                <p>Copyright © 2021.Company name All rights reserved.<a target="_blank"
                                                                        href="https://sc.chinaz.com/moban/">网页模板</a>
                </p>
            </div>
        </div>
    </div>
</div>

<script th:inline="javascript">
    let message = [[${message}]];
    $(function showMessage() {
        if (message != null) {
            alert(message)
        }
    })
</script>

<script th:inline="javascript">
    function delDoc(did) {
        let r = confirm("删除信息将会注销该医生登录账号,是否确定删除?")
        if (r === true) {
            window.location.href = "/api/admin/delDoc?did=" + did;
        }
    }

    function likeSearchSubmit() {
        const form = document.getElementById("likeSearch")
        form.submit()
    }
</script>


<script>
    function giveDocInfo(docInfo) {
        const header = $("meta[name='_csrf_header']").attr("content");
        const token = $("meta[name='_csrf']").attr("content");

        $.ajax({
            type: "POST",
            url: "/page/admin/docInfoModify",
            data: JSON.stringify(docInfo),
            dataType: "json",
            contentType: 'application/json;charset=utf-8',
            beforeSend: function (xhr) {
                xhr.setRequestHeader(header, token);
            },
            success: function () {
                window.location.href = "/page/admin/toDocInfoModify"
            },
            error: function () {
                window.location.reload()
            }
        });
    }

</script>

<!-- Script Start -->
<script th:src="@{/static/js/jquery.min.js}"></script>
<script th:src="@{/static/js/popper.min.js}"></script>
<script th:src="@{/static/js/bootstrap.min.js}"></script>
<script th:src="@{/static/js/swiper.min.js}"></script>
<script th:src="@{/static/js/apexcharts.min.js}"></script>
<script th:src="@{/static/js/control-chart-apexcharts.js}"></script>
<!-- Page Specific -->
<script th:src="@{/static/js/nice-select.min.js}"></script>
<!-- Custom Script -->
<script th:src="@{/static/js/custom.js}"></script>
</body>

</html>