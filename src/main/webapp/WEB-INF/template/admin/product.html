<!DOCTYPE html>
<!--[if IE 8]>
<html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]>
<html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="zxx" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<!--<![endif]-->
<!-- Begin Head -->
<script src="https://code.jquery.com/jquery-3.0.0.min.js"></script>
<head>
    <title>体检预约管理系统-admin-商品</title>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="">
    <meta name="MobileOptimized" content="320">
    <!--Start Style -->
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/fonts.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/range.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/bootstrap.min.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/font-awesome.min.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/icofont.min.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/style.css}">
    <link rel="stylesheet" id="theme-change" type="text/css" href="">
</head>
<style>
    .bbb {
        min-width: 170px;
        padding: 0 15px;
        height: 50px;
        line-height: 52px;
        display: inline-block;
        text-align: center;
        color: white;
        background: rgb(17, 161, 253);
        text-transform: capitalize;
        font-weight: 500;
        position: relative;
        overflow: hidden;
        border: none;
        border-radius: 5px;
    }

    .bbb:hover {
        color: white;
        background: black;
    }

    .buttonbecolor:hover {
        color: var(--primary);
    }

    .product-text-rs span {
        text-decoration: none;
    }
</style>

<body>
<div class="loader">
    <div class="spinner">
        <img th:src="@{/static/picture/loader.gif}" alt="">
    </div>
</div>
<!-- Main Body -->
<div class="page-wrapper">
    <div th:replace="template.html::title"></div>
    <div th:replace="template.html::aside"></div>

    <!-- Container Start -->
    <div class="page-wrapper">
        <div class="main-content">
            <!-- Page Title Start -->
            <div class="row">
                <div class="colxl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                    <div class="page-title-wrapper">
                        <div class="page-title-box">
                            <h4 class="page-title">商品信息</h4>
                        </div>
                        <div class="breadcrumb-list">
                            <ul>
                                <li>
                                    <div class="add-group">
                                        <form action="/page/admin/toProductAdd">
                                            <button class="bbb">添加</button>
                                        </form>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Table Start -->
            <div class="row ad-btm-space">
                <div class="col-xl-3 col-lg-4 col-md-4 col-sm-12">
                    <div class="int-blog-sidebar">
                        <div class="int-sidebar-box">
                            <h4>搜索</h4>
                            <div class="int-search-btn">
                                <div class="input-group">
                                    <form th:action="@{/api/admin/likeSearchByGoodsName}" id="likeSearch">
                                        <input type="text" placeholder="商品名称" name="likeSearch"
                                               th:value="${likeSearch}" id="goodsName">
                                        <div class="input-group-append">
                                            <button type="submit">
                                                <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 30.239 30.239"
                                                     width="18" height="18">
                                                    <g>
                                                        <g>
                                                            <path d="M20.194,3.46c-4.613-4.613-12.121-4.613-16.734,0c-4.612,4.614-4.612,12.121,0,16.735   c4.108,4.107,10.506,4.547,15.116,1.34c0.097,0.459,0.319,0.897,0.676,1.254l6.718,6.718c0.979,0.977,2.561,0.977,3.535,0   c0.978-0.978,0.978-2.56,0-3.535l-6.718-6.72c-0.355-0.354-0.794-0.577-1.253-0.674C24.743,13.967,24.303,7.57,20.194,3.46z    M18.073,18.074c-3.444,3.444-9.049,3.444-12.492,0c-3.442-3.444-3.442-9.048,0-12.492c3.443-3.443,9.048-3.443,12.492,0   C21.517,9.026,21.517,14.63,18.073,18.074z"
                                                                  data-original="#000000" class="active-path"
                                                                  data-old_color="#000000" fill="#ffffff"></path>
                                                        </g>
                                                    </g>
                                                </svg>
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="int-sidebar-box recent-blog-one">
                            <h4>热门</h4>
                            <div class="int-blog-category-mini">
                                <ul th:each="TOP:${TOP5List}">
                                    <li>
                                        <a th:attr="onclick='getTop(\'' + ${TOP.getGoodsname()} + '\')'">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="12px" height="8px">
                                                <path fill-rule="evenodd" fill=" "
                                                      d="M0.038,4.720 L6.164,4.710 C6.558,4.710 6.878,4.392 6.878,3.999 L6.878,2.016 L9.967,3.999 L5.777,6.688 C5.445,6.901 5.349,7.342 5.563,7.673 C5.777,8.004 6.219,8.099 6.551,7.886 L11.673,4.597 C11.877,4.466 12.000,4.241 12.000,3.999 C12.000,3.756 11.877,3.531 11.673,3.400 L6.551,0.112 C6.331,-0.030 6.051,-0.040 5.822,0.085 C5.592,0.210 5.449,0.449 5.449,0.710 L5.449,3.286 L0.000,3.286 "></path>
                                            </svg>
                                            <span th:text="${TOP.getGoodsname()}"></span>
                                        </a>
                                        <span th:text="'￥'+${TOP.getPrice()}" style="color: rgb(17,161,253)">201</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="int-sidebar-box recent-blog-one">
                            <h4>筛选</h4>
                            <div class="int-blog-category-mini">
                                <ul>
                                    <li>
                                        <a th:href="@{/page/admin/product}">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="12px" height="8px">
                                                <path fill-rule="evenodd" fill=" "
                                                      d="M0.038,4.720 L6.164,4.710 C6.558,4.710 6.878,4.392 6.878,3.999 L6.878,2.016 L9.967,3.999 L5.777,6.688 C5.445,6.901 5.349,7.342 5.563,7.673 C5.777,8.004 6.219,8.099 6.551,7.886 L11.673,4.597 C11.877,4.466 12.000,4.241 12.000,3.999 C12.000,3.756 11.877,3.531 11.673,3.400 L6.551,0.112 C6.331,-0.030 6.051,-0.040 5.822,0.085 C5.592,0.210 5.449,0.449 5.449,0.710 L5.449,3.286 L0.000,3.286 "></path>
                                            </svg>
                                            <span>全部</span>
                                        </a>
                                        <a th:href="@{/api/admin/productByIfShelf?ifshelf=1}">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="12px" height="8px">
                                                <path fill-rule="evenodd" fill=" "
                                                      d="M0.038,4.720 L6.164,4.710 C6.558,4.710 6.878,4.392 6.878,3.999 L6.878,2.016 L9.967,3.999 L5.777,6.688 C5.445,6.901 5.349,7.342 5.563,7.673 C5.777,8.004 6.219,8.099 6.551,7.886 L11.673,4.597 C11.877,4.466 12.000,4.241 12.000,3.999 C12.000,3.756 11.877,3.531 11.673,3.400 L6.551,0.112 C6.331,-0.030 6.051,-0.040 5.822,0.085 C5.592,0.210 5.449,0.449 5.449,0.710 L5.449,3.286 L0.000,3.286 "></path>
                                            </svg>
                                            <span>已上架</span>
                                        </a>
                                        <a th:href="@{/api/admin/productByIfShelf?ifshelf=0}">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="12px" height="8px">
                                                <path fill-rule="evenodd" fill=" "
                                                      d="M0.038,4.720 L6.164,4.710 C6.558,4.710 6.878,4.392 6.878,3.999 L6.878,2.016 L9.967,3.999 L5.777,6.688 C5.445,6.901 5.349,7.342 5.563,7.673 C5.777,8.004 6.219,8.099 6.551,7.886 L11.673,4.597 C11.877,4.466 12.000,4.241 12.000,3.999 C12.000,3.756 11.877,3.531 11.673,3.400 L6.551,0.112 C6.331,-0.030 6.051,-0.040 5.822,0.085 C5.592,0.210 5.449,0.449 5.449,0.710 L5.449,3.286 L0.000,3.286 "></path>
                                            </svg>
                                            <span>未上架</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-9 col-lg-8 col-md-8 col-sm-12">
                    <div class="main-product-grid">
                        <ul>
                            <li th:each="info:${productList}">
                                <div class="product-grid">
                                    <div class="product-item">
                                        <img th:src="${info.getPic()}" th:alt="${info.getGoodsname()}+'-img'">
                                        <div class="product-ovr-links">
                                            <ul>
                                                <li>
                                                    <a th:href="@{/page/admin/toProductModify?gid=}+${info.getGid()}"
                                                       style="color: white">修改</a>
                                                </li>
                                                <li>
                                                    <a style="color: white"
                                                       th:attr="onclick='delGoods(\'' + ${info.getGid()} + '\')'">删除</a>
                                                </li>
                                                <li>
                                                    <input disabled th:value="${info.getIfshelf()}" id="ifShelf"
                                                           hidden="hidden">
                                                    <!--														th:attr="onclick='upAndDown(\'' + ${info.getGid()} + '\')'"-->
                                                    <a style="color: white"
                                                       th:text="${info.getIfshelf()}==0?'上架':'下架'"
                                                       th:onclick="upAndDown([[${info}]])"></a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="product-text-rs">
                                        <h3 th:text="${info.getGoodsname()}">Occasional Chai</h3>
                                        <h6 style="margin-bottom: 3px">适宜人群: <span
                                                th:text="${info.getForpeople()}"></span></h6>
                                        <h6 style="margin-bottom: 3px">适宜年龄: <span
                                                th:text="${info.getForage()}"></span></h6>
                                        <p th:text="'￥'+${info.getPrice()}" style="color: red"></p>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="card-footer pt-0">
                        <form id="pageForm" action="/page/admin/product">
                            <span th:if="${ifShelf}"><input type="hidden" name="ifshelf" th:value="${ifShelf}"></span>
                            <span th:if="${likeSearch}"><input type="hidden" name="likeSearch" th:value="${likeSearch}"></span>
                            <input type="hidden" id="page" name="pageNum" value="1">
                        </form>
                        <nav class="d-inline-block" style="float: right;">
                            <ul class="pagination mb-0 ">
                                <li class="page-item " id="pagePreLi">
                                    <a class="page-link" tabindex="-1"
                                       th:attr="onclick='jumpPage(\'' + ${pageInfo.prePage} + '\')'" id="prePage"><i
                                            class="fas fa-chevron-left"></i></a>
                                </li>
                                <li class="page-item" th:each="page,pageStat:${pageInfo.navigatepageNums}"
                                    th:id="page+${page}">
                                    <a class="page-link" th:attr="onclick='jumpPage(\'' + ${page} + '\')'"
                                       th:text="${page}"></a>
                                </li>
                                <li class="page-item " id="pageNextLi">
                                    <a class="page-link "
                                       th:attr="onclick='jumpPage(\'' + ${pageInfo.nextPage} + '\')'"><i
                                            class="fas fa-chevron-right "></i></a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>

            </div>
            <div class="ad-footer-btm">
                <p>Copyright &copy; 2021.Company name All rights reserved.<a target="_blank"
                                                                             href="https://sc.chinaz.com/moban/">&#x7F51;&#x9875;&#x6A21;&#x677F;</a>
                </p>
            </div>
        </div>
    </div>
</div>

<script th:inline="javascript">
    let message = [[${message}]]
    let pageInfo = [[${pageInfo}]]
    let pageType = [[${pageType}]];
    $(function showMessage() {
        //失效页码，第一页的上一页和最后一页的下一页
        if (pageInfo.pageNum === 1) {
            // console.log(1)
            document.getElementById("pagePreLi").className = "page-item disabled"
        }
        if (pageInfo.pageNum === pageInfo.pages) {
            // console.log(2)
            document.getElementById("pageNextLi").className = "page-item disabled"
        }
        //蓝标以选中的页码
        document.getElementById("page" + pageInfo.pageNum).className = "page-item active"

        //条件查询时不同的转到地址，默认为搜索全部
        //上架/未上架
        if (pageType === "ifShelfPage") {
            // console.log(1)
            document.getElementById("pageForm").action = "/api/admin/productByIfShelf";
        }
        //模糊查询
        else if (pageType === "likeSearch") {
            document.getElementById("pageForm").action = "/api/admin/likeSearchByGoodsName";
        }


        //消息提示
        if (message != null) {
            alert(message);
            window.location.href = "/page/admin/product";
        }
    })
</script>

<script th:inline="javascript">
    function getTop(goodsName) {
        const form = document.getElementById("likeSearch")
        const input = document.getElementById("goodsName")
        input.value = goodsName
        form.submit()
    }

    function delGoods(gid) {
        const r = confirm("是否确认删除商品信息？（ps:不可删除用户以及购买的商品）")
        if (r) {
            window.location.href = "/api/admin/delGoods?gid=" + gid
        }
    }

    function jumpPage(pageNum) {
        //先修改要访问的页码
        document.getElementById("page").value = pageNum;
        //手动提交查询form表单
        document.getElementById("pageForm").submit();
    }
</script>

<script>
    function upAndDown(info) {
        let r = false;
        // console.log(info)
        if (info.ifshelf === 1) {
            r = confirm("是否确认下架？");
        } else {
            r = confirm("是否确认上架？")
        }
        if (r) {
            window.location.href = "/api/admin/upOrDownGoods?gid=" + info.gid;
        }
    }

</script>

<script th:src="@{/static/js/jquery.min.js}"></script>
<script th:src="@{/static/js/range.js}"></script>
<script th:src="@{/static/js/popper.min.js}"></script>
<script th:src="@{/static/js/bootstrap.min.js}"></script>
<script th:src="@{/static/js/custom.js}"></script>
</body>

</html>